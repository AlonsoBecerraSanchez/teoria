<!DOCTYPE html>
<html>
  <head>
    <title>Teoria.js - Testsuite</title>
    <script src="http://code.jquery.com/qunit/qunit-git.js"></script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/qunit/qunit-git.css" />
    <script src="../teoria.js"></script>
    <script>
    	window.onload = function() {
    	  test("Teoria Note object", function() {
    	    var a4 = teoria.note('A4');
    	    equal(a4.octave, 4, 'Octave of A4 is 4');
    	    equal(a4.name, 'a', 'Note name is lowerCase');
    	    equal(a4.key(), 49, 'A4 is the 49th key');
    	    equal(a4.helmholtz(), "a'", 'A4 is expressed: a\' in Helmholtz notation');
    	    equal(a4.scientific(), "A4", "A4 is scientific for A4");
    	    equal(a4.fq(), 440, 'A4 is 440hz');
    	    
    	    cis5 = teoria.note("c#''");
    	    equal(cis5.octave, 5, "c#'' is in the fifth octave");
    	    equal(cis5.name, 'c', "The name of c# is just c");
    	    equal(cis5.accidental.sign, '#', 'The accidental of c# is #');
    	    equal(cis5.accidental.value, 1, 'The value of a sharp is 1');
    	    equal(cis5.key(), 53, 'C#5 is the 53rd key');
    	    equal(cis5.helmholtz(), "c#''", 'C#5 is c#\'\' in Helmholtz');
    	    equal(cis5.scientific(), 'C#5', "c#'' is C#5 in scientific notation");
    	    equal(cis5.fq(), 554.3652619537442, 'The frequency of C#5 is 554.3652619537442');
    	    
    	    deepEqual(cis5.interval(a4), {name: "third", quality: "major", direction: "down"}, 'A4 is a Major third below C#5');
    	    
    	    deepEqual(teoria.note.fromKey(28), teoria.note('c3'), 'Key number 28 is the same as C3');
    	  });
    	  
    	  test("Teoria Scales", function() {
    	    var a4 = teoria.note('A4'), cis = teoria.note('C#4'), dis = teoria.note('D#4');
    	    deepEqual(a4.scale('aeolian', true), ['a', 'b', 'c', 'd', 'e', 'f', 'g'], 'An aeolian scale');
    	    deepEqual(a4.scale('locrian', true), ['a', 'bb', 'c', 'd', 'eb', 'f', 'g'], 'A locrian scale');
    	    deepEqual(a4.scale('ionian', true), ['a', 'b', 'c#', 'd', 'e', 'f#', 'g#'], 'A ionian scale');
    	    deepEqual(a4.scale('dorian', true), ['a', 'b', 'c', 'd', 'e', 'f#', 'g'], 'A dorian scale');
    	    deepEqual(a4.scale('phrygian', true), ['a', 'bb', 'c', 'd', 'e', 'f', 'g'], 'A phrygian scale');
    	    deepEqual(a4.scale(teoria.scale.scales.lydian, true), ['a', 'b', 'c#', 'd#', 'e', 'f#', 'g#'], 'A lydian scale, using the direct scale element');
    	    deepEqual(cis.scale('major', true), ['c#', 'd#', 'e#', 'f#', 'g#', 'a#', 'b#'], 'Cis Major scale');
    	    deepEqual(dis.scale('major', true), ['d#', 'e#', 'fx', 'g#', 'a#', 'b#', 'cx'], 'Dis Major scale');
    	    
    	    deepEqual(teoria.scale.list(a4, 'minorpentatonic', true), ['a', 'c', 'd', 'e', 'g'], 'An a minor pentatonic from the scale namespace');
    	  });
    	  
    	  test("Teoria Intervals", function() {
    	    var e = teoria.note(',E');
    	    var fis = teoria.note(',F#');
    	    equal(teoria.interval.invert('m2'), 'M7', 'Invert m2 is M7');
    	    equal(teoria.interval.invert('M2'), 'm7', 'Invert M2 is m7');
    	    equal(teoria.interval.invert('m3'), 'M6', 'Invert m3 is M6');
    	    equal(teoria.interval.invert('M3'), 'm6', 'Invert M3 is m6');
    	    equal(teoria.interval.invert('A5'), 'd4', 'Invert A5 is d4');
    	    equal(teoria.interval.invert('d4'), 'A5', 'Invert d4 is A5');
    	    deepEqual(teoria.interval.between(e, fis), {name: 'second', quality: 'major', direction: 'up'}, 'Interval between e and f# is M2');
    	  });
    	}
    </script>
  </head>
  <body>
    <h1 id="qunit-header">Teoria.js Testsuite</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture"></div>
  </body>
</html>